10 GOSUB 1000 : ' Init
20 GOSUB 2000 : ' Menu display
30 WHILE quit = 0
40   GOSUB 3000 : ' Game loop
50 WEND
60 GOSUB 7000 ' End display
70 CLS : END


1000 '
1010 ' Init
1020 MODE 1
1030 quit = 0
1040 score = 0 : apples = 0
1050 level = 0 : finalLevel = 2
1060 x=20 : y=12
1070 DIM map(40, 24)
1080 ' Custom characters
1085 ' Global vars:
1086 ' CHR_PLAYER = 248 : CHR_WALL = 207 : CHR_APPLE = 240
1087 ' APPLE_POINTS = 10
1088 '
1090 SYMBOL AFTER 200
1100 SYMBOL 240, &X100, &X1000, &X111100, &X1111110, &X11111111, &X11111111, &X1111110, &X111100 ' Apple
1110 ' TODO: More characters
1120 '
1170 ' Display config
1180 BORDER 0
1190 INK 0,  0 :  ' Black background
1200 INK 1, 22 :  ' Green walls
1210 INK 2,  6 :  ' Red apples
1220 INK 3, 26 :  ' White player
1500 RETURN


2000 '
2010 'Main display
2020 LOCATE 16, 9 : PRINT "THE GAME"
2030 LOCATE 13, 14
2040 input "Name: ", nickname$
2500 RETURN


3000 '
3010 ' Game loop
3020 IF apples = 0 THEN GOSUB 5000 : ' Next level
3030 LOCATE x, y : PEN 3 : PRINT CHR$(248)
3040 IF INKEY(69) <> -1 OR JOY(0) = 4 THEN LOCATE x, y: PRINT " " : x=x-1
3050 IF INKEY(61) <> -1 OR JOY(0) = 8 THEN LOCATE x, y: PRINT " " : x=x+1
3060 IF INKEY(59) <> -1 OR JOY(0) = 1 THEN LOCATE x, y: PRINT " " : y=y-1
3070 IF INKEY(60) <> -1 OR JOY(0) = 2 THEN LOCATE x, y: PRINT " " : y=y+1
3080 IF INKEY(67) <> -1 THEN quit = 1 : GOSUB 8200 : ' Q -> Quit
3090 IF map(x, y) = 1 THEN quit = 1  : GOSUB 8200 : ' Crash against wall
3100 IF map(x, y) = 2 THEN map(x, y) = 0 : score = score + 10 : apples = apples - 1 : LOCATE 1, 25 : PRINT "Score: "; score; : GOSUB 8100 : ' Captures
3500 RETURN


4000 '
4010 ' Set read values and map printing
4020 CLS
4030 FOR row = 1 TO 24
4040   FOR column = 1 TO 40
4050     READ map(column, row)
4060     IF map(column, row) = 1 THEN LOCATE column, row : PEN 1 : PRINT CHR$(207);
4070     IF map(column, row) = 2 THEN LOCATE column, row : PEN 2 : PRINT CHR$(240);
4080   NEXT column
4090 NEXT row
4100 LOCATE 1, 25 : PRINT "Score: "; score;
4500 RETURN


5000 '
5001 ' Print next level
5002 IF level = finalLevel THEN quit = 1 : RETURN ' Game completed
5003 x = 20 : y = 12
5006 level = level + 1
5007 GOSUB 6000 : ' Next level display
5008 GOSUB 4000 : ' Set read values and map printing
5010 RANDOMIZE TIME
5020 apples = 1
5030 xItem = 1 : yItem = 1
5040 FOR i=1 TO apples
5045   WHILE map(xItem, yItem) <> 0  ' Looking for a free position
5047     xItem = INT(RND*38) + 1 : yItem = INT(RND*22) + 1
5050   WEND
5060   LOCATE xItem, yItem : PEN 2 : PRINT CHR$(240); : map(xItem, yItem) = 2
5070 NEXT i
5500 RETURN


6000 '
6010 ' Level display
6020 FOR i=1 TO 1500: NEXT ' Sleep
6030 CLS
6040 LOCATE 16, 12 : PRINT "Level"; level
6050 LOCATE 16, 15 : PRINT "Score: "; score
6060 LOCATE 1, 23
6070 FOR i=1 TO 2500: NEXT ' Sleep
6100 RETURN


7000 '
7010 ' End display
7020 FOR i=1 TO 1000: NEXT ' Sleep
7030 CLS
7040 LOCATE 13, 10 : PRINT "G A M E  O V E R"
7050 LOCATE 13, 14 : PRINT nickname$; " score: "; score
7060 LOCATE 1, 23
7070 FOR i=1 TO 3000: NEXT ' Sleep
7100 RETURN


8000 ' SONIDOS 8000
8010 ' Note values: C=1, D=2, E=3, F=4, G=5, A=6, B=7

8100 ' Success sound
8120 FOR I=3 TO 5
8130   SOUND 1, 30 + 20 * i, 5, 8
8140 NEXT I
8150 RETURN

8200 ' Extra success sound
8210 FOR I=7 TO 1 STEP -2
8220   SOUND 1, 30 + 20 * i, 5, 8
8230   SOUND 3, 30 + 20 * i, 5, 8
8240 NEXT I
8250 RETURN

8300 ' Start sound
8310 FOR i = 1 TO 7
8320   SOUND 1, 20 + 10 * i, 5, 10
8330   SOUND 3, 20 + 10 * i, 5, 10
8340 NEXT i
8350 END



10000 ' Map 1
10010 DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
10020 DATA 1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
10030 DATA 1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
10040 DATA 1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
10050 DATA 1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
10060 DATA 1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1
10070 DATA 1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1
10080 DATA 1,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1
10090 DATA 1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1
10100 DATA 1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1
10110 DATA 1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
10120 DATA 1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
10130 DATA 1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
10140 DATA 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1
10150 DATA 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
10160 DATA 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
10170 DATA 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
10180 DATA 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
10190 DATA 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1
10200 DATA 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
10210 DATA 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
10220 DATA 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
10230 DATA 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
10240 DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1

11000 ' Map 2
11010 DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
11020 DATA 1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1
11030 DATA 1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
11040 DATA 1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
11050 DATA 1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
11060 DATA 1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1
11070 DATA 1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1
11080 DATA 1,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1
11090 DATA 1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1
11100 DATA 1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1
11110 DATA 1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
11120 DATA 1,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
11130 DATA 1,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
11140 DATA 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1
11150 DATA 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
11160 DATA 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
11170 DATA 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
11180 DATA 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
11190 DATA 1,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1
11200 DATA 1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1
11210 DATA 1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,1
11220 DATA 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
11230 DATA 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
11240 DATA 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
